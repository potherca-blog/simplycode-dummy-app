<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- Component CSS -->
    <style>
      
    </style>
    <!-- /Component CSS -->
    <!-- Page CSS -->
    <style>
      
    </style>
    <!-- /Page CSS -->
    <!-- Head HTML -->
    
    <!-- /Head HTML -->
    <script>
      var simplyDataApi = {};
      var simplyApp = {};
      window.addEventListener("simply-content-loaded", function() {
        simply.bind = false;
        /* Raw API */
        var simplyRawApi = {
          
        };
        /* End of Raw API */
        /* Data API */
        simplyDataApi = {
          
        };
        /* End of Data API */
        simplyApp = simply.app({
          /* Actions */
          actions: {
            
          },
          /* /Actions */
          /* Commands */
          commands: {
            
          },
          /* /Commands */
          /* Routes */
          routes: {
            "/" : function (params) {
              editor.pageData.page = 'hello'
            }
            
          }
          /* /Routes */
        });
      });
      function clone(ob) {
        return JSON.parse(JSON.stringify(ob));
      }
      function updateDataSource(name) {
        document.querySelectorAll('[data-simply-data="'+name+'"]').forEach(function(list) {
          editor.list.applyDataSource(list, name);
          list.dataBindingPaused = 0;
        });
      }
    </script>
  </head>
  <body>
    <!-- Body HTML -->
    
    <!-- /Body HTML -->
    <!-- Component HTML templates -->
    
    <!-- /Component HTML templates -->
    <header data-simply-path="/" data-simply-field="header" data-simply-content="template" data-simply-default-value="Header">
      <template data-simply-template='Header' rel="header"></template>
    </header>
    <nav>
      <div is="simply-component" rel="menu"></div>
    </nav>
    <div class="main" data-simply-field="page" data-simply-content="template">
    <!-- Page HTML templates -->
    <template data-simply-template="home">
      <h1>This is an App</h1>
    </template>
    <!-- /Page HTML templates -->
    </div>
    <script src="js/simply.everything.js"></script>
    <script>
      window.waitForImport = {
        init : () => true,
        save : () => true,
        load : function(callback) {
          window.addEventListener("simply-import-fired", () => {
            callback("{}");
          })
        },
        connect: () => true,
        disconnect: () => true
      }
    </script>
    <script src="js/simply-edit.js" data-api-key="muze" data-simply-storage="waitForImport"></script>
    <script>
      /* Transformers */
      editor.transformers = {
        
      };
      /* /Transformers */
    </script>
    <script>
      /* Sorters */
      editor.sorters = {
        
      };
      /* /Sorters */
    </script>
    <script>
      window.addEventListener("simply-content-loaded", function() {
        /* Data sources */
        
        /* /Data sources */
      });
    </script>
    <!-- Foot HTML -->
    <!-- importFoot -->
    <script type="module">
      import dc from 'https://cdn.jsdelivr.net/gh/potherca-blog/simplycode-dummy-component@v0.3.0/index.js'
    
      document.body.insertAdjacentHTML('beforeend', dc.componentTemplates)
      document.body.querySelector("[data-simply-field=page]").insertAdjacentHTML('beforeend', dc.pageTemplates);
    
      // We need to make sure that both simplyApp _and_ dc[...] are loaded.
      // Race conditions caused by network transport need to be mitigated...
    
      /**
       * @CHECKME: De we want routes? This is a new APP, do components even have routes?
       */
      function importActionsAndCommands(simplyApp, dc) {
        Object.entries(dc.simplyApp.actions).forEach(([index,action]) => {
          simplyApp.actions[index] = action
        })
    
        Object.entries(dc.simplyApp.commands).forEach(([index,command]) => {
          simplyApp.commands[index] = command
        })
      }
    
      window.addEventListener("simply-content-loaded", () => {
        importActionsAndCommands(simplyApp, dc)
      })
    
      // @CHECKME: Should we fire at the window or at the document? Why?
      editor.fireEvent('simply-import-fired', window)
    </script>
    
    <!-- /Foot HTML -->
  </body>
</html>